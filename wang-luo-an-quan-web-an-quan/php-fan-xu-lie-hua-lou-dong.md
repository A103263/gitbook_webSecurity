---
description: 主要介绍反序列化漏洞的利用方法和一些已知cms的反序列化漏洞，在本篇中我将方法和函数混淆使用，一般面向对象中都称之为方法。
---

# PHP反序列化漏洞

php中通过两个函数即可实相对象的序列化（serialize）和反序列化（unserialize），而漏洞的利用主要是通过类重写的魔术函数来一步一步的达到恶意代码执行的目的。

## PHP的魔术函数

> 魔术（magic）函数命名是以符号\_\_\(两个下划线\)开头的，在特定的情况下调用

1. \_\_construct\(\),类的构造函数 php中构造函数也是在对象创建完成后第一个被对象调用的方法，但是在php中同一个类只能声明一个构造方法，原因是，php不支持构造函数的重载
2. \_\_destruct\(\),析构方法 析构方法在销毁一个对象前执行的一系列操作或完成一些功能，php中析构函数不能带有任何参数（一般不会有漏洞）
3. \_\_call\(\)方法，在对象中调用一个不可访问方法时调用 \_\__call方法一般有两个参数（$function\_name,array $arguments），第一个参数用来传递不可用的方法的名字，第二个参数是一个数组，用来接收传递的参数列表。_ call方法主要是为了避免程序中调用了不存在的方法时产生的错误，而意外的导致程序的终止。
4. \_\_callStatic\(\)方法，用静态方式去调用\[O::F\(\)\]一个不可访问的方法时调用 与\_\_call方法类似
5. \_\_get\(\),当访问一个不可访问的属性时调用 默认有一个参数name，用来传递不可访问属性名
6. \_\_set\(\),在给一个不可以访问的属性赋值时会调用此方法 默认两个参数（$name,$value），用来传递属性名和值
7. \_\_isset\(\),当对不可访问属性调用isset\(\),或empty\(\)时调用



